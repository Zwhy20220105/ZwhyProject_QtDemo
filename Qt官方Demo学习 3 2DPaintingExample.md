# Qt官方Demo学习 3 2DPaintingExample

[TOC]

想要学点东西

## 类的构造顺序

我有个疑问 ==helper类的构造函数在哪里调用的==,我观察了一下类的结构,最开始出现这个类的地方在这里.

```
class QtDemo_2DPaintingExample : public QWidget
{
    Q_OBJECT
public:
    QtDemo_2DPaintingExample();
private:
	/**	在这里就会调用构造函数,这里是	*/
	QtDemo_helper m_helper;

};
```

然后就是

```
	QtDemo_widget* pWidght = new QtDemo_widget(&m_helper, this);
```

但是这个地方肯定不是调用构造函数的地方,反而是证明此时类已经构造完成了,因为可以进行取地址.然后作为参数传入.

那就只有类的成员变量定义的地方.

​	==C++遵循如下的创建顺序：==

(1)如果某个**类**具体基**类**，执行基**类**的默认**构造**函数。

 (2)**类**的非静态数据成员，按照声明的**顺序**创建。

 (3)执行该**类**的**构造**函数。

​	这样一些都解释的通了,如果声明一个指向类的指针,他不会分配内存,也不会调用构造函数,但是声明一个类对象的是同时,会调用该类的构造函数,并且成员变量的声明周期等同于该类.





## paintEvent事件的调用时机

我跟着构造函数在VS中临摹此Demo,随着代码越敲越多,我发现我实现的和官方的不一样.后面我发现玄机可能出现在这.

关于Qt,首先是信号与槽机制,然后是插件化架构我觉得很厉害,再就是Event机制,有点搞不懂.

我曾以为Event只会在update中调用,但是如果是那样的话,这不是成为一个函数了吗?

### 引发重绘事件的情况：

1. 当窗口控件第一次显示时，系统会自动产生一个绘图事件。
2. repaint()与update()函数被调用时。
3. 当窗口控件被其他部件遮挡，然后又显示出来时，会对隐藏的区域产生一个重绘事件。
4. 重新调整窗口大小时。

所以,只要窗口构造完成,Event事件就会调用一次,看样子是虚函数,不是纯虚函数.

**但是不知道为啥,放大缩小这个主窗口,这个事件会被调用两次**
